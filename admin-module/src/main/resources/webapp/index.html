<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Reedelk ESB console UI">
    <meta name="author" content="">

    <title>Reedelk ESB Administration</title>

    <link href="/console/css/icons-style.css" rel="stylesheet"/>
    <link href="/console/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="/console/css/console-style.css" rel="stylesheet"/>
    <link href="/console/css/toastr.min.css" rel="stylesheet"/>

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="/console/img/favicon/favicon-16x16.png"/>
</head>

<body>

<!-- Fixed navbar -->
<nav class="navbar navbar-expand-sm navbar-dark bg-secondary">
    <a class="navbar-brand" href="/">
        <img src="/console/img/reedelk_logo.png" alt="Reedelk logo">
        &nbsp;&nbsp;Reedelk ESB Administration
    </a>
</nav>

<div class="container-fluid">

    <!-- Install Module -->
    <div class="row admin-section-row-padding">
        <div class="col">
            <h5><i class="icon-box-remove"></i>&nbsp;&nbsp;Install Module</h5>
        </div>
    </div>

    <form id="deployModuleForm">
        <div class="row">
            <div class="col-5 form-group">
                <input id="inputModule" type="file" class="form-control-file" aria-describedby="inputModuleHelp"
                       placeholder="Select module to install" name="moduleFilePath">
            </div>
            <div class="col-7 form-group">
                <label for="submitModule">&nbsp;</label>
                <button type="submit" id="submitModule" class="btn btn-secondary">Deploy Module</button>
            </div>
        </div>
    </form>

    <!-- Deployed Modules -->
    <div class="row admin-section-row-padding">
        <div class="col">
            <h5><i class="icon-menu"></i>&nbsp;&nbsp;Deployed Modules</h5>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <div class="accordion" id="modulesTableContainer">
                <table class="table table-hover" id="deployed-modules">
                    <col width="40">
                    <thead class="bg-secondary text-primary">
                    <tr>
                        <th class="align-center">Status</th>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Version</th>
                        <th>Path</th>
                        <th></th>
                        <th></th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Placed at the end of the document so the pages load faster -->
<script src="/console/js/jquery.min.js"></script>
<script src="/console/js/bootstrap.min.js"></script>
<script src="/console/js/bootstrap-collapse.js"></script>
<script src="/console/js/module-details-renderer.js"></script>
<script src="/console/js/modules-table-renderer.js"></script>
<script src="/console/js/utilities.js"></script>
<script src="/console/js/constants.js"></script>
<script src="/console/js/html-templates.js"></script>
<script src="/console/js/deployment-controller.js"></script>
<script src="/console/js/toastr.min.js"></script>

<script>

    listModules();

    function onUpdate(moduleName, moduleFilePath) {
        updateModule(moduleName, moduleFilePath);
    }

    function onRemove(moduleName, moduleFilePath) {
        removeModule(moduleName, moduleFilePath);
    }

    var formElem = document.getElementById('deployModuleForm');
    formElem.onsubmit = function (e) {
        e.preventDefault();
        var formData = new FormData(formElem);
        deployModule(formData);
    };

</script>

</body>
</html>
