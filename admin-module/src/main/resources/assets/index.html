<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Reedelk ESB console UI">
    <meta name="author" content="">

    <title>Reedelk ESB admin console</title>

    <link href="/console/css/bootstrap.min.css" rel="stylesheet">
    <link href="/console/css/console-style.css" rel="stylesheet">
    <link href="/console/css/toastr.min.css" rel="stylesheet"/>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
          integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="/console/img/favicon/favicon-16x16.png"/>
</head>

<body>

<!-- Fixed navbar -->
<nav class="navbar navbar-expand-sm navbar-dark bg-secondary">

    <a class="navbar-brand" href="/">
        <img src="/console/img/reedelk_logo.png" alt="Reedelk logo">
        &nbsp;Reedelk ESB admin console
    </a>
</nav>

<div class="container-fluid">

    <!-- Install Module -->
    <div class="row">
        <div class="col">
            <h5><i class="fas fa-upload section-title"></i>&nbsp;&nbsp;Install Module</h5>
            <p>Deploy or upldate a module by selecting the module jar file</p>
        </div>
    </div>
    <form id="deployModuleForm">
        <div class="row">
            <div class="col-5 form-group">
                <input type="file"
                       class="form-control-file"
                       id="inputModule"
                       aria-describedby="inputModuleHelp"
                       placeholder="Select module to install"
                       name="moduleFilePath">
            </div>
            <div class="col-7 form-group">
                <label for="submitModule">&nbsp;</label>
                <button type="submit" id="submitModule" class="btn btn-secondary">Deploy Module</button>
            </div>
        </div>
    </form>

    <!-- Deployed Modules -->
    <div class="row">
        <div class="col">
            <h5><i class="fas fa-th-list section-title"></i>&nbsp;&nbsp;Deployed Modules</h5>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <div class="accordion" id="modulesTableContainer">
                <table class="table table-hover" id="deployed-modules" style="border-collapse:collapse;">
                    <col width="40">
                    <thead class="bg-secondary text-primary">
                    <tr>
                        <th class="align-center">Status</th>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Version</th>
                        <th>Path</th>
                        <th></th>
                        <th></th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="/console/js/bootstrap.min.js"></script>
<script src="/console/js/bootstrap-collapse.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="/console/js/ie10-viewport-bug-workaround.js"></script>
<script src="/console/js/module-details-renderer.js"></script>
<script src="/console/js/modules-table-renderer.js"></script>
<script src="/console/js/utilities.js"></script>
<script src="/console/js/constants.js"></script>
<script src="/console/js/html-templates.js"></script>
<script src="/console/js/deployment-controller.js"></script>
<script src="/console/js/toastr.min.js"></script>

<script>

    listModules();

    function onUpdate(moduleName, moduleFilePath) {
        updateModule(moduleName, moduleFilePath);
    }

    function onRemove(moduleName, moduleFilePath) {
        removeModule(moduleName, moduleFilePath);
    }

    var formElem = document.getElementById('deployModuleForm');
    formElem.onsubmit = function (e) {
        e.preventDefault();
        var formData = new FormData(formElem);
        deployModule(formData);
    };

</script>

</body>
</html>
